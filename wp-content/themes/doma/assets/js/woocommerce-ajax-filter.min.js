!function(e){"use strict";var o=o||{};o.init=function(){o.$body=e(document.body),o.ajaxXHR=null,this.paginationAjax(),this.filterAjax()},o.setCookie=function(e,o){document.cookie=e+"="+o+"; "},o.getCookie=function(e){for(var o=e+"=",r=document.cookie.split(";"),t=0;t<r.length;t++){for(var i=r[t];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(o))return i.substring(o.length,i.length)}return""},o.LoadmoreAjax=function(o,r,t){if(e(".zoo-woo-page")[0]&&(e(document).on("click",".view-more-button",function(e){e.preventDefault()}),e(".pagination-ajax")[0]))if(e(t)[0]){var i=!1,a=!0;e(".view-more-button")[0]&&(i=".view-more-button",a=!1,e(document).on("click",".view-more-button",function(){e(this).hide()}));new InfiniteScroll(o,{path:t,append:r,status:".page-load-status",hideNav:".pagination-ajax",button:i,scrollThreshold:a});e(o).on("history.infiniteScroll",function(o,r,t){e(".view-more-button").show()}),e(o).on("last.infiniteScroll",function(o,r,t){e(".view-more-button").remove()})}else e(".pagination-ajax,.infinite-scroll-error,.infinite-scroll-request,.view-more-button").remove()},o.priceSlider=function(){if("undefined"==typeof woocommerce_price_slider_params)return!1;if(e(".catalog-sidebar").find(".widget_price_filter").length<=0)return!1;e("input#min_price, input#max_price").hide(),e(".price_slider, .price_label").show();var o=e(".price_slider_amount #min_price").data("min"),r=e(".price_slider_amount #max_price").data("max"),t=parseInt(o,10),i=parseInt(r,10);""!=e(".price_slider_amount #min_price").val()&&(t=parseInt(e(".price_slider_amount #min_price").val(),10)),""!=e(".price_slider_amount #max_price").val()&&(i=parseInt(e(".price_slider_amount #max_price").val(),10)),e(document.body).bind("price_slider_create price_slider_slide",function(o,r,t){"left"===woocommerce_price_slider_params.currency_pos?(e(".price_slider_amount span.from").html(woocommerce_price_slider_params.currency_symbol+r),e(".price_slider_amount span.to").html(woocommerce_price_slider_params.currency_symbol+t)):"left_space"===woocommerce_price_slider_params.currency_pos?(e(".price_slider_amount span.from").html(woocommerce_price_slider_params.currency_symbol+" "+r),e(".price_slider_amount span.to").html(woocommerce_price_slider_params.currency_symbol+" "+t)):"right"===woocommerce_price_slider_params.currency_pos?(e(".price_slider_amount span.from").html(r+woocommerce_price_slider_params.currency_symbol),e(".price_slider_amount span.to").html(t+woocommerce_price_slider_params.currency_symbol)):"right_space"===woocommerce_price_slider_params.currency_pos&&(e(".price_slider_amount span.from").html(r+" "+woocommerce_price_slider_params.currency_symbol),e(".price_slider_amount span.to").html(t+" "+woocommerce_price_slider_params.currency_symbol)),e(document.body).trigger("price_slider_updated",[r,t])}),void 0!==e.fn.slider&&e(".price_slider").slider({range:!0,animate:!0,min:o,max:r,values:[t,i],create:function(){e(".price_slider_amount #min_price").val(t),e(".price_slider_amount #max_price").val(i),e(document.body).trigger("price_slider_create",[t,i])},slide:function(o,r){e("input#min_price").val(r.values[0]),e("input#max_price").val(r.values[1]),e(document.body).trigger("price_slider_slide",[r.values[0],r.values[1]])},change:function(o,r){e(document.body).trigger("price_slider_change",[r.values[0],r.values[1]])}})},o.paginationAjax=function(){o.$body.on("click",".woocommerce-pagination a",function(o){if(o.preventDefault(),!e(this).data("requestRunning")){e("#content-product").addClass("loading"),e("html, body").animate({scrollTop:e("#main-page").offset().top},1e3),e(this).data("requestRunning",!0);e(this).closest(".woocommerce-pagination").prev(".products");var r=e(this).closest(".woocommerce-pagination");e.get(e(this).attr("href"),function(o){e("#content-product .products").replaceWith(e(o).find("#content-product .products"));var t=e(o).find(".woocommerce-pagination").html();e(".woocommerce-result-count").html(e(o).find(".woocommerce-result-count").html()),r.html(t),e(document.body).trigger("clever_shop_ajax_loading_success"),e("#content-product").removeClass("loading")})}})},o.filterAjax=function(){e(".zoo-woo-sidebar").hasClass("catalog-sidebar")&&(e(document.body).on("price_slider_change",function(o,r){e("#content-product").addClass("loading"),e("body").removeClass("sidebar-active"),e("html, body").animate({scrollTop:e("#main-page").offset().top},1e3);var t=e(".price_slider").closest("form").get(0),i=e(t),a=i.attr("action")+"?"+i.serialize();e(document.body).trigger("clever_widget_ajax_filter",a,e(this))}),o.$body.find(".catalog-sidebar").on("click","li:not(.current-cat) a,li:not(.chosen) a",function(o){o.preventDefault(),e(".catalog-sidebar a").removeClass("active"),e("#content-product").addClass("loading"),e("body").removeClass("sidebar-active"),e("html, body").animate({scrollTop:e("#main-page").offset().top},1e3);var r=e(this).attr("href");e(document.body).trigger("clever_widget_ajax_filter",r,e(this))}),o.$body.find(".catalog-sidebar").on("click","li.current-cat a",function(o){o.preventDefault(),e("#content-product").addClass("loading"),e("body").removeClass("sidebar-active"),e("html, body").animate({scrollTop:e("#main-page").offset().top},1e3);var r=e(".products").data("shoplink");e(document.body).trigger("clever_widget_ajax_filter",r,e(this))}),e(document.body).on("clever_widget_ajax_filter",function(r,t,i){var a=e("#content-product"),c=e(".catalog-sidebar"),n=e(".woocommerce-result-count");"?"==t.slice(-1)&&(t=t.slice(0,-1)),t=t.replace(/%2C/g,","),history.pushState(null,null,t),e(document.body).trigger("clever_ajax_filter_before_send_request",[t,i]),o.ajaxXHR&&o.ajaxXHR.abort(),o.ajaxXHR=e.get(t,function(r){a.replaceWith(e(r).find("#content-product")),c.html(e(r).find(".catalog-sidebar").html()),n.html(e(r).find(".woocommerce-result-count").html());var i=o.getCookie("product-layout");"list"==i?e(".products").removeClass("grid").addClass("list"):e(".products").removeClass("list").addClass("grid"),o.setCookie("product-layout",i),e(".widget.woocommerce .widget-title").on("click",function(){e(this).toggleClass("on"),e(this).next().slideToggle()}),e("#content-product").removeClass("loading"),e(".woocommerce.widget")[0]&&e(".woocommerce.widget").each(function(){e(this).find("ul").outerHeight()>=250&&e(this).find("ul").addClass("scroll")}),o.priceSlider(),o.LoadmoreAjax(".wrap-product-page .products",".product","a.next.page-numbers"),e(document.body).trigger("clever_ajax_filter_request_success",[r,t])},"html")}))},e(function(){o.init()})}(jQuery);