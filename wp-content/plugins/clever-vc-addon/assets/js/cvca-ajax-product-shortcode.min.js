!function(_){"use strict";var r={init:function(){var a=_(".cvca-products-wrap:not(.advanced-filter)");r.zooWooFilterCatShortCode(a),r.zooWooFilterAssetShortCode(a),r.zooWooAdvancedFilterFunction(),r.zooWooToggleFilterFunction()},zooCarousel:function(f,v){_(f).each(function(){var a=JSON.parse(jQuery(this).attr("data-config")),t=a.col_xl,e=a.col_lg,o=a.col_md,c=a.col_sm,s=a.col,r=a.scroll,d=a.autoplay,i=a.speed,l=a.show_pag,n=a.show_nav,p=null!=a.wrap?a.wrap:"";if(v)var u=v;else u=_(f).find(_(p).not(".ajax-loaded"));u.slick({slidesToShow:t,slidesToScroll:t<r?t:r,arrows:n,dots:l,prevArrow:'<span class="cvca-carousel-btn prev-item"><i class="cs-font clever-icon-arrow-left-1"></i></span>',nextArrow:'<span class="cvca-carousel-btn next-item "><i class="cs-font clever-icon-arrow-right-1"></i></span>',autoplay:d,autoplaySpeed:i,rtl:!!_("body.rtl")[0],responsive:[{breakpoint:1200,settings:{slidesToShow:e,slidesToScroll:e<r?e:r}},{breakpoint:992,settings:{slidesToShow:o,slidesToScroll:o<r?o:r}},{breakpoint:768,settings:{slidesToShow:c,slidesToScroll:c<r?c:r}},{breakpoint:576,settings:{slidesToShow:s,slidesToScroll:s<r?s:r}}]})})},zooWooFilterCatShortCode:function(c){c.find(".cvca-list-product-category a").on("click",function(a){a.preventDefault(),c.find(".cat-selected").html(_(this).text()+'<i class="cs-font clever-icon-down"></i>')}),c.find(".cvca-ajax-load.filter-cate a").on("click",function(a){a.preventDefault();var t=_(this);if(c=t.parents(".cvca-products-wrap"),!t.hasClass("active")){if(t.parents(".cvca-ajax-load ").find("a").removeClass("active"),t.addClass("active"),t.hasClass("opened")){var e=t.data("value");return t.parents(".cvca-products-wrap").find(".products").hide(),void t.parents(".cvca-products-wrap").find(".ajax-loaded").each(function(){if(_(this).hasClass(e)&&(_(this).show(),c.find(".cvca-wrap-products-sc").hasClass("cvca-carousel"))){var a=c.find(".cvca-carousel");_(this).hasClass("slick-slider")&&_(this).slick("destroy"),r.zooCarousel(a,_(this))}})}t.addClass("opened"),c.find(".cvca-wrap-products-sc").addClass("loading");t.attr("href"),t.attr("title");var o=c.data("args");o.action="cvca_ajax_product_filter","product_cat"==t.data("type")&&(o.product_attribute=[],o.attribute_value=[],o.product_tag="",o.filter_categories=t.data("value"),o.show=""),c.data("original",o),c.data("args",o),c.data(t.data("value"),o),_.ajax({url:c.data("url"),data:o,type:"POST"}).success(function(a){_(document.body).trigger("cvca_woo_after_cat_filter",{response:a,wrap:c,cate_name:o.filter_categories})}).error(function(a){console.log(a)})}})},zooWooFilterAssetShortCode:function(s){s.find(".cvca-ajax-load.filter-asset a").on("click",function(a){a.preventDefault();var t=_(this);if(!t.hasClass("active")){if(s=t.parents(".cvca-products-wrap"),t.parents(".cvca-ajax-load ").find("a").removeClass("active"),t.addClass("active"),t.hasClass("opened")){var e=t.data("value");return t.parents(".cvca-products-wrap").find(".products").hide(),void t.parents(".cvca-products-wrap").find(".ajax-loaded").each(function(){if(_(this).hasClass(e)&&(_(this).show(),s.find(".cvca-wrap-products-sc").hasClass("cvca-carousel"))){var a=s.find(".cvca-carousel");_(this).hasClass("slick-slider")&&_(this).slick("destroy"),r.zooCarousel(a,_(this))}})}t.parents(".cvca-products-wrap").find(".cvca-wrap-products-sc").addClass("loading"),t.addClass("opened");e=t.attr("data-value");var o,c=_.parseJSON(s.attr("data-args"));o={action:"cvca_ajax_product_filter",asset_type:e,col_width:c.col_width,col_width_medium:c.col_width_medium,col_width_small:c.col_width_small,filter:c.filter,filter_categories:c.filter_categories,posts_per_page:c.posts_per_page,pagination:c.pagination,orderby:c.orderby},_.ajax({url:ajaxurl,data:o,type:"POST"}).success(function(a){_(document.body).trigger("cvca_woo_after_filter_asset_type",{response:a,wrap:s,asset_type:o.asset_type})}).error(function(a){console.log(a)})}})},zooWooAdvancedFilterFunction:function(){var r=_(".cvca-products-wrap.advanced-filter");_(document).on("click",".cvca-products-wrap.advanced-filter .cvca_search_button",function(){var a=_(this).prev().val(),t=_(this);_.ajax({url:r.data("url"),data:{action:"cvca_ajax_product_filter",cvca_search:a},type:"POST"}).success(function(a){t.parent().next().html(a)})}),r.find(".cvca-list-product-category a").on("click",function(a){a.preventDefault(),r.find(".cat-selected").html(_(this).text()+'<i class="cs-font clever-icon-down"></i>')}),r.find(".cvca-ajax-load a, .cvca-remove-attribute").on("click",function(a){a.preventDefault();var t=_(this);(r=t.parents(".cvca-products-wrap")).addClass("loading");t.attr("href"),t.attr("title");var e=r.data("args");if(e.action="cvca_ajax_product_filter",t.hasClass("cvca-product-attribute")?"object"!=typeof e.product_attribute||t.hasClass("active")?(e.product_attribute=[],e.attribute_value=[]):(e.product_attribute.push(t.data("value")),e.attribute_value.push(t.data("attribute_value"))):e[t.data("type")]=t.data("value"),e.paged=1,"product_cat"==t.data("type")&&(e.product_attribute=[],e.attribute_value=[],e.product_tag="",e.filter_categories=t.data("value"),e.show=""),"cvca-reset-filter"==t.data("type")&&(e.product_attribute=[],e.attribute_value=[],e.product_tag="",e.filter_categories=r.data("categories"),e.show="",e.price_filter=0,_(".wrap-content-product-filter ").find(".active").removeClass("active")),"cvca-remove-attr"==t.data("type")){t.next().data("value");var o=t.next().data("attribute_value"),c=e.attribute_value.indexOf(o);-1<c&&(e.attribute_value.splice(c,1),e.product_attribute.splice(c,1))}"cvca-remove-price"==t.data("type")&&(e.price_filter=0);var s=_('input[name="s"]').val();""!=s&&(e.s=s),t.hasClass("active")&&"cvca-reset-filter"!=t.data("type")?("product_cat"==t.data("type")?(e.filter_categories=r.data("categories"),t.parents(".cvca-list-product-category").find("li:first-child a").addClass("active")):e[t.data("type")]="",t.removeClass("active")):(t.parents(".cvca-ajax-load ").find(".active").removeClass("active"),t.addClass("active")),r.data("original",e),r.data("args",e),_.ajax({url:r.data("url"),data:e,type:"POST"}).success(function(a){_(document.body).trigger("cvca_woo_after_filter",{response:a,wrap:r,max_page:_(a).find(".cvca_ajax_load_more_button").data("maxpage"),current_page:e.paged})}).error(function(a){console.log(a)})}),_(document).on("click",".cvca-products-wrap.advanced-filter .cvca_ajax_load_more_button",function(a){if(a.preventDefault(),!_(this).hasClass("disable")){var t=_(this).parents(".cvca-products-wrap"),e=t,o=t.data("args");_(this).addClass("cvca-loading");var c=_(this).data("maxpage");o.paged<c&&(o.action="cvca_ajax_product_filter",o.paged=parseInt(o.paged)+parseInt(1),_.ajax({url:_(this).attr("href"),data:o,type:"POST"}).success(function(a){_(document.body).trigger("cvca_woo_after_loadmore",{response:_(a).find(".products").html(),wrap:e,max_page:c,current_page:o.paged})}).error(function(a){console.log(a)}))}})},zooWooToggleFilterFunction:function(){_(".wrap-head-product-filter .cvca-toogle-filter").on("click",function(){_(this).toggleClass("active"),_(".cvca-wrap-adv-filter").slideToggle()}),_(".cvca-title-filter-item").on("click",function(a){a.preventDefault(),_(window).width()<769&&_(this).next().slideToggle()}),_(".cvca-ajax-load").parent().addClass("tab"),_(".wrap-head-product-filter-inner.tab").on("click",function(){_(window).width()<769&&(_(this).toggleClass("active"),_(this).find(".cvca-ajax-load").slideToggle())})}};_(document).ready(function(){r.init()}),_(window).load(function(){}),_(window).resize(function(){}),_(document.body).bind("cvca_woo_after_cat_filter",function(a,t){var e=t.wrap,o=t.cate_name;e.find(".cvca-wrap-products-sc").removeClass("loading"),e.find(".products:not(.ajax-loaded)").show(),e.find(".products.all").hide(),e.find(".products.ajax-loaded").hide(),e.find(".products").not(".ajax-loaded").remove();var c="products grid-layout";if(e.find(".cvca-wrap-products-sc").hasClass("cvca-carousel")){c+=" carousel middle-nav ",e.find(".append-class").append('<ul class=" '+c+' ">'+_(t.response).html()+"</ul>");var s=e.find(".cvca-carousel");r.zooCarousel(s,null)}else e.find(".append-class").append('<ul class=" '+c+' ">'+_(t.response).html()+"</ul>");c+=" ajax-loaded ",e.find(".products").parents(".append-class").append('<ul class=" '+c+o+'" style="display: none">'+_(t.response).html()+"</ul>")}),_(document.body).bind("cvca_woo_after_filter_asset_type",function(a,t){var e=t.wrap,o=t.asset_type;e.find(".cvca-wrap-products-sc").removeClass("loading"),e.find(".products:not(.ajax-loaded)").show(),e.find(".products.ajax-loaded").hide(),e.find(".products").not(".ajax-loaded,.deal").remove();var c="products grid-layout";if(e.find(".cvca-wrap-products-sc").hasClass("cvca-carousel")){c+=" carousel middle-nav ",e.find(".append-class").append('<ul class=" '+c+' ">'+_(t.response).html()+"</ul>");var s=e.find(".cvca-carousel");r.zooCarousel(s,null)}else e.find(".append-class").append('<ul class=" '+c+' ">'+_(t.response).html()+"</ul>");c+=" ajax-loaded ",e.find(".products").parents(".append-class").append('<ul class=" '+c+o+'" style="display: none">'+_(t.response).html()+"</ul>")}),_(document.body).bind("cvca_woo_after_loadmore",function(a,t){var e=t.wrap,o=t.max_page,c=_(t.response);e.find(".products").data("zoo-config").highlight_featured?e.find(".products").append(c).isotope("appended",c):e.find(".products").append(c),e.find(".lazy-img.wp-post-image:not(.loaded)")[0]&&e.find(".lazy-img.wp-post-image:not(.loaded)").lazyload({effect:"fadeIn",threshold:_(window).height(),load:function(){_(this).parent().removeClass("loading"),_(this).addClass("loaded")}}),o==t.current_page?e.find(".cvca_ajax_load_more_button").addClass("disable").html(e.find(".cvca_ajax_load_more_button").data("empty")):e.find(".cvca_ajax_load_more_button").show(),e.find(".cvca_ajax_load_more_button").removeClass("cvca-loading")}),_(document.body).bind("cvca_woo_after_filter",function(a,t){var e=t.wrap,o=t.max_page,c=_(t.response).find(".product");c[0]?(e.find(".products").data("zoo-config").highlight_featured?e.find(".products").isotope("remove",e.find(".product")).append(c).isotope("appended",c).isotope("layout"):e.find(".products").html(c),e.find(".lazy-img.wp-post-image:not(.loaded)")[0]&&e.find(".lazy-img.wp-post-image:not(.loaded)").lazyload({effect:"fadeIn",threshold:_(window).height(),load:function(){_(this).parent().removeClass("loading"),_(this).addClass("loaded")}})):e.find(".products").html('<h3 class="products-emt">'+e.data("empty")+"</h3>"),e.find(".cvca_ajax_load_more_button")[0]&&(o!=t.current_page&&o?e.find(".cvca_ajax_load_more_button").data("maxpage",o):e.find(".cvca_ajax_load_more_button").addClass("disable").html(e.find(".cvca_ajax_load_more_button").data("empty"))),e.removeClass("loading")})}(jQuery);